<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="profile-header">
  <% if (user.image && user.image.data) { %>
    <img src="data:<%= user.image.contentType %>;base64,<%= user.image.data.toString('base64') %>" alt="Profile Image" />
  <% } else { %>
    <img src="/default-profile.png" alt="Default Profile" />
  <% } %>
  <h3>Hello, <%= user.name %></h3>
  <a style="text-decoration: none; position: absolute; right: 20px; top: 20px; padding: 10px 15px;font-family: sans-serif; border-radius: 10px; background: #fa4e4e; color: aliceblue;" href="/logout" onclick="return confirm('Are you sure you want to delete account?')">logout</a>
</div>

<h1 style="margin-left: 20px;">Set Image</h1>
<form action="/uplode" method="post" enctype="multipart/form-data">
  <input type="file" name="image" required/>
  <input type="submit" value="Upload Image" />
</form>

<form action="/post" method="post">
  <textarea name="content" placeholder="Write your blog content here..." required></textarea>
  <input type="submit" value="Post Blog" />
</form>

<div class="post-container">
  <% user.posts.reverse().forEach(function(post){ %>
    <div class="post-card">
      <h3>@<%= user.username %></h3>
      <p><%= post.content %></p>
      <div class="post-actions">
        <small><%= post.likes.length %> likes</small>
        <a class="like" href="/like/<%= post._id %>">
          <%= post.likes.indexOf(user._id) === -1 ? "Like" : "Unlike" %>
        </a>
        <a class="edit" href="/edit/<%= post._id %>">Edit</a>
        <a class="delete" href="/delete/<%= post._id %>" onclick="return confirm('Are you sure you want to delete this post?')">🗑️ Delete</a>
      </div>
    </div>
  <% }) %>
</div>

</body>
</html>